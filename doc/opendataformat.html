<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>opendataformat</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">opendataformat</h1>


<div id="TOC">
<ul>
<li><a href="#introducing-the-opendataformat-package" id="toc-introducing-the-opendataformat-package">Introducing the
opendataformat package</a>
<ul>
<li><a href="#installation" id="toc-installation">Installation</a></li>
</ul></li>
<li><a href="#functions-in-the-openmetadata-package" id="toc-functions-in-the-openmetadata-package">Functions in the
openmetadata Package</a>
<ul>
<li><a href="#read-the-open-data-format-read_opendf" id="toc-read-the-open-data-format-read_opendf">Read the Open Data
Format: <code>read_opendf()</code></a></li>
<li><a href="#explore-dataset-information-docu_opendf" id="toc-explore-dataset-information-docu_opendf">Explore Dataset
Information: <code>docu_opendf()</code></a>
<ul>
<li><a href="#display-medatata" id="toc-display-medatata">Display
Medatata</a></li>
<li><a href="#display-metadata-in-a-specific-language" id="toc-display-metadata-in-a-specific-language">Display Metadata in a
Specific Language</a></li>
</ul></li>
<li><a href="#set-the-active-language-of-a-data-frame-setlanguage_opendf" id="toc-set-the-active-language-of-a-data-frame-setlanguage_opendf">Set
the Active Language of a Data Frame:
<code>setLanguage_opendf()</code></a></li>
<li><a href="#access-metadata-getmetadata_opendf-and-attributes" id="toc-access-metadata-getmetadata_opendf-and-attributes">Access
Metadata: <code>getmetadata_opendf()</code> and
<code>attributes()</code></a>
<ul>
<li><a href="#retrieve-the-attributes-with-attributes-and-attr" id="toc-retrieve-the-attributes-with-attributes-and-attr">Retrieve the
Attributes with <code>attributes()</code> and
<code>attr()</code></a></li>
<li><a href="#retrieve-metadata-with-getmetadata_opendf" id="toc-retrieve-metadata-with-getmetadata_opendf">Retrieve Metadata
with <code>getmetadata_opendf()</code></a></li>
</ul></li>
<li><a href="#export-to-the-open-data-format-write_opendf" id="toc-export-to-the-open-data-format-write_opendf">Export to the Open
Data Format: <code>write_opendf()</code></a></li>
</ul></li>
<li><a href="#lets-analyse-and-make-use-of-the-metadata" id="toc-lets-analyse-and-make-use-of-the-metadata">Let’s Analyse and
Make Use of the Metadata</a>
<ul>
<li><a href="#frequency-table" id="toc-frequency-table">Frequency
Table</a></li>
<li><a href="#merge-odf-datasets" id="toc-merge-odf-datasets">Merge
ODF-Datasets:</a>
<ul>
<li><a href="#recoding-a-variable" id="toc-recoding-a-variable">Recoding
a Variable</a></li>
<li><a href="#barplot" id="toc-barplot">Barplot</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<p><br> <!-- Insert an empty line --> <br>
<!-- Insert an empty line --></p>
<div id="introducing-the-opendataformat-package" class="section level1">
<h1>Introducing the opendataformat package</h1>
<p>Tired of struggling to convert open data formats into R dataframes?
Look no further and welcome the opendataformat package.</p>
<p>With just a few lines of code, you can convert a data package
specified as opendataformat into an R dataframe
(<code>read_opendf()</code>) or convert an R dataframe into a data
package specified in the opendataformat
(<code>write_opendf()</code>).</p>
<p>But wait, there’s more! Our package goes beyond parsing. Accessing
metadata has never been easier. Dive into the treasure trove of
information stored in your R dataframes. Explore dataset labels,
descriptions, and valuable details about variables such as labels and
value labels with the <code>docu_opendf()</code> function and the
<code>getmetadata_opendf()</code> function.</p>
<p>This vignette will guide you through a series of examples that
demonstrate the possibilities of these functions. Let’s get started!</p>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>You can download and install the package by downloading the latest
version from Zenodo. Alternatively you can download the development
version from gitlab using the <code>install_git()</code>-function from
the devtools-library.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># At this point you can download and install the the latest version of the opendataformat package from Zenodo:</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co">#download.file(&quot;[xenodo download Link]&quot;, </span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">#              destfile = paste0(tempdir(), &quot;/&quot;, &quot;opendataformat.tar.gz&quot;), method = &quot;curl&quot;)</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co">#install.packages(paste0(tempdir(), &quot;/&quot;, &quot;opendataformat.tar.gz&quot;), </span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">#                 repos = NULL, type = &quot;source&quot;)</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co"># Alternatively you can install the development version from Gitlab:</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co"># install.packages(&quot;devtools&quot;)</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co">#devtools::install_git(&quot;https://git.soep.de/opendata/r-package-opendataformat.git&quot;,  </span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co">#                      quiet = TRUE)</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="fu">library</span>(opendataformat)</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="co">#&gt; Lade nötiges Paket: crayon</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="co">#&gt; Lade nötiges Paket: cli</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="co">#&gt; Attache Paket: &#39;cli&#39;</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="co">#&gt; Das folgende Objekt ist maskiert &#39;package:crayon&#39;:</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="co">#&gt;     num_ansi_colors</span></span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a><span class="co">#&gt; Lade nötiges Paket: magrittr</span></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a><span class="co">#&gt; Lade nötiges Paket: xml2</span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a><span class="co">#&gt; Lade nötiges Paket: data.table</span></span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a><span class="co">#&gt; Lade nötiges Paket: zip</span></span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a><span class="co">#&gt; Attache Paket: &#39;zip&#39;</span></span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a><span class="co">#&gt; Die folgenden Objekte sind maskiert von &#39;package:utils&#39;:</span></span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a><span class="co">#&gt;     unzip, zip</span></span></code></pre></div>
<p>12917713</p>
</div>
</div>
<div id="functions-in-the-openmetadata-package" class="section level1">
<h1>Functions in the openmetadata Package</h1>
<div id="read-the-open-data-format-read_opendf" class="section level2">
<h2>Read the Open Data Format: <code>read_opendf()</code></h2>
<p>The opendataformat package provides example data that is specified as
‘Open Data Format’. Data in the open data format is a ZIP file
containing a csv-file and a xml-file. The example data contains the
data-csv (<code>data.csv</code>) with 20 rows and 7 columns and the
metadata-XML (<code>metadata.xml</code>). The metadata file describes
the dataset and its variables. If you are interested in what these files
look like, you can find an example in the Open Data Format git
repository: <a href="https://git.soep.de/opendata/specification/-/tree/main/external/example">https://git.soep.de/opendata/specification/-/tree/main/external/example</a>
To load the data, we need to specify the path to the zip-file. Here the
example data is loaded using <code>read_opendf()</code> Alternatively,
you can set <code>file</code> to a zip-file in the working
directory.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>, <span class="st">&quot;data.zip&quot;</span>, <span class="at">package=</span><span class="st">&quot;opendataformat&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_opendf</span>(<span class="at">file =</span> path)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">#df &lt;- read_opendf(file = &quot;../my_data.zip&quot;)</span></span></code></pre></div>
<p>The output of the <code>read_opendf()</code> function is an
R-data.frame object, that has the additional class <code>opendf</code>.
It has additional metadata stored in the attributes of the dataframe and
the variables/columns. These include the languages of the metadata,
labels, descriptions, urls, variable types, and value labels.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>df</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>   bap87 bap9201 bap9001 bap9002 bap9003 bap96      name</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="dv">1</span>      <span class="dv">4</span>      <span class="sc">-</span><span class="dv">2</span>       <span class="dv">1</span>      <span class="sc">-</span><span class="dv">1</span>       <span class="dv">2</span> <span class="sc">-</span><span class="fl">2.00</span>     Jakob</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="dv">2</span>      <span class="dv">3</span>       <span class="dv">5</span>      <span class="sc">-</span><span class="dv">2</span>       <span class="dv">1</span>       <span class="dv">4</span>  <span class="fl">1.57</span>      Luca</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="dv">3</span>     <span class="cn">NA</span>      <span class="sc">-</span><span class="dv">1</span>      <span class="sc">-</span><span class="dv">1</span>       <span class="dv">2</span>      <span class="sc">-</span><span class="dv">1</span>  <span class="fl">1.92</span>    Emilia</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="dv">4</span>      <span class="dv">1</span>       <span class="dv">9</span>      <span class="sc">-</span><span class="dv">2</span>       <span class="dv">2</span>       <span class="dv">4</span>  <span class="fl">1.85</span>        <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="dv">5</span>     <span class="sc">-</span><span class="dv">1</span>       <span class="dv">4</span>       <span class="dv">2</span>       <span class="dv">3</span>       <span class="dv">1</span>  <span class="fl">1.91</span>   Johanna</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="dv">6</span>      <span class="dv">3</span>       <span class="dv">4</span>      <span class="sc">-</span><span class="dv">1</span>       <span class="dv">4</span>      <span class="sc">-</span><span class="dv">2</span>  <span class="fl">1.80</span>      Paul</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="dv">7</span>      <span class="dv">1</span>       <span class="dv">9</span>       <span class="dv">2</span>      <span class="sc">-</span><span class="dv">1</span>      <span class="sc">-</span><span class="dv">1</span>  <span class="fl">1.80</span>          </span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="dv">8</span>      <span class="dv">5</span>       <span class="dv">6</span>       <span class="dv">1</span>      <span class="sc">-</span><span class="dv">1</span>       <span class="dv">1</span>  <span class="fl">1.96</span>       Mia</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="dv">9</span>      <span class="dv">5</span>       <span class="dv">5</span>       <span class="dv">5</span>       <span class="dv">3</span>       <span class="dv">1</span>  <span class="fl">1.64</span>       Ben</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="dv">10</span>    <span class="sc">-</span><span class="dv">2</span>       <span class="dv">4</span>       <span class="dv">4</span>      <span class="sc">-</span><span class="dv">1</span>      <span class="sc">-</span><span class="dv">2</span>  <span class="fl">1.93</span>     Jakob</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="dv">11</span>    <span class="sc">-</span><span class="dv">1</span>       <span class="dv">4</span>       <span class="dv">2</span>       <span class="dv">1</span>       <span class="dv">5</span>  <span class="fl">1.93</span>     Anton</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="dv">12</span>    <span class="sc">-</span><span class="dv">2</span>       <span class="dv">5</span>       <span class="dv">3</span>      <span class="sc">-</span><span class="dv">2</span>       <span class="dv">4</span>    <span class="cn">NA</span> Charlotte</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="dv">13</span>     <span class="dv">3</span>      <span class="sc">-</span><span class="dv">1</span>       <span class="dv">2</span>       <span class="dv">1</span>       <span class="dv">2</span>  <span class="fl">1.74</span>      Luca</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="dv">14</span>     <span class="dv">2</span>      <span class="sc">-</span><span class="dv">2</span>      <span class="sc">-</span><span class="dv">2</span>       <span class="dv">4</span>      <span class="sc">-</span><span class="dv">1</span>  <span class="fl">1.65</span>     Maria</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="dv">15</span>     <span class="dv">5</span>      <span class="sc">-</span><span class="dv">1</span>      <span class="sc">-</span><span class="dv">2</span>      <span class="sc">-</span><span class="dv">1</span>      <span class="sc">-</span><span class="dv">1</span>  <span class="fl">1.80</span>   Johanna</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a><span class="dv">16</span>     <span class="dv">4</span>       <span class="dv">5</span>       <span class="dv">1</span>       <span class="dv">3</span>      <span class="sc">-</span><span class="dv">1</span>  <span class="fl">1.58</span>      Emma</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="dv">17</span>     <span class="dv">3</span>       <span class="dv">7</span>       <span class="dv">1</span>       <span class="dv">2</span>      <span class="sc">-</span><span class="dv">2</span>  <span class="fl">1.95</span>     Felix</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="dv">18</span>     <span class="dv">3</span>      <span class="cn">NA</span>       <span class="dv">5</span>       <span class="dv">3</span>      <span class="sc">-</span><span class="dv">2</span>  <span class="fl">1.98</span>     David</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a><span class="dv">19</span>    <span class="sc">-</span><span class="dv">2</span>       <span class="dv">8</span>       <span class="dv">1</span>       <span class="dv">4</span>       <span class="dv">5</span>  <span class="fl">1.61</span>        <span class="sc">-</span><span class="dv">2</span></span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="dv">20</span>     <span class="dv">2</span>       <span class="dv">8</span>       <span class="dv">3</span>       <span class="dv">1</span>       <span class="dv">2</span>  <span class="fl">1.83</span>     Anton</span></code></pre></div>
<p>If you load the haven package, you see the variable labels in the <a href="#set-the-active-language-of-a-data-frame-setlanguage_opendf">active
language</a> .</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co">#library(haven)</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co">#View(df)</span></span></code></pre></div>
<p>If you want to import a dataset with metadata only in one or several
languages. You can use the <code>languages</code>-argument. To load the
example data only with english labels and descriptions, set
<code>languages=&quot;en&quot;</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>df_en <span class="ot">&lt;-</span> <span class="fu">read_opendf</span>(<span class="at">file =</span> path, <span class="at">languages=</span><span class="st">&quot;en&quot;</span>)</span></code></pre></div>
<p>By default <code>languages=&quot;all&quot;</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>df_en <span class="ot">&lt;-</span> <span class="fu">read_opendf</span>(<span class="at">file =</span> path, <span class="at">languages=</span><span class="st">&quot;all&quot;</span>)</span></code></pre></div>
<p>You can also give a list of languages::</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>df_en <span class="ot">&lt;-</span> <span class="fu">read_opendf</span>(<span class="at">file =</span> path, <span class="at">languages=</span><span class="fu">c</span>(<span class="st">&quot;en&quot;</span>, <span class="st">&quot;de&quot;</span>))</span></code></pre></div>
<p>You can set further arguments for the <code>read_opendf()</code>
function. With the <code>nrows</code> argument you define how many rows
to read excluding the header. With the <code>skip</code> parameter you
set how many rows to skip (excluding the header).With the
<code>variables</code> input you determine which columns/variables to
load with a vector of indices or variable/column names.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">read_opendf</span>(file, <span class="at">languages =</span> <span class="st">&quot;all&quot;</span>, <span class="at">nrows =</span> <span class="cn">Inf</span>, <span class="at">skip =</span> <span class="dv">0</span>, <span class="at">variables =</span> <span class="cn">NULL</span>)</span></code></pre></div>
</div>
<div id="explore-dataset-information-docu_opendf" class="section level2">
<h2>Explore Dataset Information: <code>docu_opendf()</code></h2>
<div id="display-medatata" class="section level3">
<h3>Display Medatata</h3>
<p>You can explore dataset information using two methods. Firstly, you
can browse metadata at the record level, providing an overview of the
dataset. Alternatively, you have the option to examine specific variable
details, allowing you to gain insights into selected data
attributes.</p>
<p>By default, when using the <code>docu_opendf()</code> function,
dataset-level information is presented through the console and an HTML
page. If you’re utilizing RStudio, this html-page will be displayed
within the RStudio viewer.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">docu_opendf</span>(df)</span></code></pre></div>
<p>To display the metadata only in the console, utilize the
<code>style</code> argument with the value set to <code>print</code> (or
<code>console</code>). This ensures that the information is conveniently
displayed on the R console, serving our specific demonstration purposes.
To display metadata information only in the viewer, set
<code>style=&quot;viewer&quot;</code> or <code>style=&quot;html&quot;</code>. By default
<code>style=&quot;both&quot;</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">docu_opendf</span>(df, <span class="at">style =</span> <span class="st">&quot;print&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; Dataset:  bap</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">#&gt; Label:</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#&gt; [en]Data from individual questionnaires 2010</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="co">#&gt; Description:</span></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt; [en]The data were collected as part of the SOEP-Core study using the questionnaire &quot;Living in Germany - Survey 2010 on the social situation - Personal questionnaire for all. This questionnaire is addressed to the individual persons in the household. A view of the survey instrument can be found here: https://www.diw.de/documents/dokumentenarchiv/17/diw_01.c.369781.de/soepfrabo_personen_2010.pdf</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="co">#&gt; languages:</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="co">#&gt;     en de (active: en)</span></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#&gt; url:</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt;     https://paneldata.org/soep-core/data/bap</span></span></code></pre></div>
<p>To obtain a comprehensive overview of all variables within the
dataset, simply set the argument <code>variables=&quot;yes&quot;</code>.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">docu_opendf</span>(df, <span class="at">variables=</span><span class="st">&quot;yes&quot;</span>, <span class="at">style=</span><span class="st">&quot;print&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>Dataset<span class="sc">:</span>  bap</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>Label<span class="sc">:</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>[en]Data from individual questionnaires <span class="dv">2010</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>Description<span class="sc">:</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>[en]The data were collected as part of the SOEP<span class="sc">-</span>Core study using the questionnaire <span class="st">&quot;Living in Germany - Survey 2010 on the social situation - Personal questionnaire for all. This questionnaire is addressed to the individual persons in the household. A view of the survey instrument can be found here: https://www.diw.de/documents/dokumentenarchiv/17/diw_01.c.369781.de/soepfrabo_personen_2010.pdf</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="st">languages:</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="st">    en de (active: en)</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="st">url:</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="st">    https://paneldata.org/soep-core/data/bap</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="st">Variables:</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="st">  Variable                          Label en</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="st">1    bap87                    Current Health</span></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="st">2  bap9201    hours of sleep, normal workday</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="st">3  bap9001     Pressed For Time Last 4 Weeks</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="st">4  bap9002 Run-down, Melancholy Last 4 Weeks</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="st">5  bap9003        Well-balanced Last 4 Weeks</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="st">6    bap96                            Height</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="st">7     name                         Firstname</span></span></code></pre></div>
<p>If you are interested in just one specific variable, you can do
this:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">docu_opendf</span>(df<span class="sc">$</span>bap9001, <span class="at">style =</span> <span class="st">&quot;print&quot;</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#&gt; Variable:  bap9001</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co">#&gt; Label:</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">#&gt; [en]Pressed For Time Last 4 Weeks</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">#&gt; Description:</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt; [en]Frequency of feeling time pressure in the past 4 weeks</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt; type:</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt;     numeric</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt; url:</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt;     https://paneldata.org/soep-core/data/bap/bap9001</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt; Value Labels:</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt;  Value             en</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co">#&gt;     -2 Does not apply</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co">#&gt;     -1      No Answer</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co">#&gt;      1         Always</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="co">#&gt;      2          Often</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co">#&gt;      3      Sometimes</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co">#&gt;      4   Almost Never</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co">#&gt;      5          Never</span></span></code></pre></div>
</div>
<div id="display-metadata-in-a-specific-language" class="section level3">
<h3>Display Metadata in a Specific Language</h3>
<p>Certain datasets offer metadata such as labels, descriptions, or
value labels in multiple languages. To display the metadata in all
languages supported by your dataset, you can simply set the
<code>languages</code> argument to <code>all</code>. This setting
enables you to identify the range of languages available for accessing
the relevant metadata within your dataset.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">docu_opendf</span>(df<span class="sc">$</span>bap9001, <span class="at">style =</span> <span class="st">&quot;print&quot;</span>, <span class="at">variables=</span><span class="st">&quot;yes&quot;</span>, <span class="at">languages =</span> <span class="st">&quot;all&quot;</span>)</span></code></pre></div>
<p>If you have a specific language of interest, you can easily display
it by utilizing the corresponding language code. Simply specify the
desired language code to retrieve the metadata in the language of your
choice. This enables you to access the specific language variant of
variable labels, value labels. In this example, we display the German
version:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">docu_opendf</span>(df<span class="sc">$</span>bap9001, <span class="at">style =</span> <span class="st">&quot;print&quot;</span>, <span class="at">languages =</span> <span class="st">&quot;de&quot;</span>)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co">#&gt; Variable:  bap9001</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co">#&gt; Label:</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt; [de]Eile, Zeitdruck letzten 4 Wochen</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co">#&gt; Description:</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt; [de]Häufigkeit des Gefühls von Zeitdruck in den letzten 4 Wochen</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#&gt; type:</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">#&gt;     numeric</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#&gt; url:</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">#&gt;     https://paneldata.org/soep-core/data/bap/bap9001</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co">#&gt; Value Labels:</span></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a><span class="co">#&gt;  Value              de</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="co">#&gt;     -2 trifft nicht zu</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co">#&gt;     -1    keine Angabe</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co">#&gt;      1           Immer</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="co">#&gt;      2             Oft</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="co">#&gt;      3        Manchmal</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="co">#&gt;      4        Fast nie</span></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="co">#&gt;      5             Nie</span></span></code></pre></div>
<p>You can apply this function to the entire dataset, allowing you to
access the desired information across all variables.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">docu_opendf</span>(df, <span class="at">style =</span> <span class="st">&quot;print&quot;</span>, <span class="at">variables=</span><span class="st">&quot;yes&quot;</span>, <span class="at">languages =</span> <span class="st">&quot;de&quot;</span>)</span></code></pre></div>
<p>If you prefer another display style, you can use the datasets’
metadata directly from the attributes and write your own code:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">names</span>(df)) {</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  <span class="fu">cat</span>(</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="fu">attributes</span>(df[[i]])<span class="sc">$</span>name, <span class="st">&quot;: &quot;</span>, <span class="fu">attributes</span>(df[[i]])<span class="sc">$</span>label_de, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>  )</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>}</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>bap87<span class="sc">:</span> Gesundheitszustand gegenwärtig</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>bap9201<span class="sc">:</span> Stunden Schlaf, normaler Werktag</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>bap9001<span class="sc">:</span> Eile, Zeitdruck letzten <span class="dv">4</span> Wochen</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>bap9002<span class="sc">:</span> Niedergeschlagen letzten <span class="dv">4</span> Wochen</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>bap9003<span class="sc">:</span> Ausgeglichen letzten <span class="dv">4</span> Wochen</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>bap96<span class="sc">:</span> Körpergröße</span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>name<span class="sc">:</span> Vorname</span></code></pre></div>
<p>You can also use the getmetadata_opendf() function to retrieve labels
and other metadata for the variables:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df, <span class="at">type=</span><span class="st">&quot;label&quot;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>                              bap87                             bap9201 </span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a>                   <span class="st">&quot;Current Health&quot;</span>    <span class="st">&quot;hours of sleep, normal workday&quot;</span> </span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>                            bap9001                             bap9002 </span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>    <span class="st">&quot;Pressed For Time Last 4 Weeks&quot;</span> <span class="st">&quot;Run-down, Melancholy Last 4 Weeks&quot;</span> </span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>                            bap9003                               bap96 </span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>       <span class="st">&quot;Well-balanced Last 4 Weeks&quot;</span>                            <span class="st">&quot;Height&quot;</span> </span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>                               name </span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>                        <span class="st">&quot;Firstname&quot;</span> </span></code></pre></div>
<p>or the value labels:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df<span class="sc">$</span>bap87, <span class="at">type=</span><span class="st">&quot;valuelabels&quot;</span>)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>Does not apply      No Answer      Very good           Good   Satisfactory </span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>            <span class="sc">-</span><span class="dv">2</span>             <span class="sc">-</span><span class="dv">1</span>              <span class="dv">1</span>              <span class="dv">2</span>              <span class="dv">3</span> </span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>          Poor            Bad </span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>             <span class="dv">4</span>              <span class="dv">5</span> </span></code></pre></div>
</div>
</div>
<div id="set-the-active-language-of-a-data-frame-setlanguage_opendf" class="section level2">
<h2>Set the Active Language of a Data Frame:
<code>setLanguage_opendf()</code></h2>
<p>Alternatively, you can set the current (active) language for a
dataset-object. (This function tries to copy the label language function
from Stata.)</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">setLanguage_opendf</span>(df, <span class="at">language=</span><span class="st">&quot;de&quot;</span>)</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="fu">docu_opendf</span>(df<span class="sc">$</span>bap9001, <span class="at">style =</span> <span class="st">&quot;print&quot;</span>)</span></code></pre></div>
<p>To display which languages are available for the dataset metadata,
display the <code>languages</code> attribute:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">attributes</span>(df)<span class="sc">$</span>languages</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;en&quot; &quot;de&quot;</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="fu">attr</span>(df, <span class="st">&quot;languages&quot;</span>)</span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;en&quot; &quot;de&quot;</span></span></code></pre></div>
</div>
<div id="access-metadata-getmetadata_opendf-and-attributes" class="section level2">
<h2>Access Metadata: <code>getmetadata_opendf()</code> and
<code>attributes()</code></h2>
<p>Browsing through datasets’ metadata provides a valuable initial
overview. However, when it comes time to dive into the analysis work,
questions arise regarding the storage location of the metadata and the
process of accessing and utilizing it. Let’s explore how and where the
metadata is stored, and how we can effectively access and leverage it
for analysis purposes.</p>
<p>A easy way to retrieve metadata is to use the
<code>getmetadata_opendf()</code> function to get metadata.</p>
<div id="retrieve-the-attributes-with-attributes-and-attr" class="section level3">
<h3>Retrieve the Attributes with <code>attributes()</code> and
<code>attr()</code></h3>
<p>Another way is to retrieve metadata directly from the attributes. The
metadata imported from the Open Data Format file into an R dataframe is
stored as R attributes. By using the base R functions
<code>attributes()</code> and <code>attr()</code>, you can easily access
this metadata. When providing the entire dataset to the function, R will
display all the metadata describing the dataset as a whole in your
console.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">attributes</span>(df)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="sc">$</span>names</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;bap87&quot;</span>   <span class="st">&quot;bap9201&quot;</span> <span class="st">&quot;bap9001&quot;</span> <span class="st">&quot;bap9002&quot;</span> <span class="st">&quot;bap9003&quot;</span> <span class="st">&quot;bap96&quot;</span>   <span class="st">&quot;name&quot;</span>   </span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="sc">$</span>row.names</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a> [<span class="dv">1</span>]  <span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span> <span class="dv">10</span> <span class="dv">11</span> <span class="dv">12</span> <span class="dv">13</span> <span class="dv">14</span> <span class="dv">15</span> <span class="dv">16</span> <span class="dv">17</span> <span class="dv">18</span> <span class="dv">19</span> <span class="dv">20</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="sc">$</span>name</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;bap&quot;</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="sc">$</span>description_en</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;The data were collected as part of the SOEP-Core study using the questionnaire </span><span class="sc">\&quot;</span><span class="st">Living in Germany - Survey 2010 on the social situation - Personal questionnaire for all. This questionnaire is addressed to the individual persons in the household. A view of the survey instrument can be found here: https://www.diw.de/documents/dokumentenarchiv/17/diw_01.c.369781.de/soepfrabo_personen_2010.pdf&quot;</span></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a><span class="sc">$</span>description_de</span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Die Daten wurden im Rahmen der Studie SOEP-Core mittels des Fragebogens „Leben in Deutschland – Befragung 2010 zur sozialen Lage - Personenfragebogen für alle“ erhoben. Dieser Fragebogen richtet sich an die einzelnen Personen im Haushalt. Eine Ansicht des Erhebungsinstrumentes finden Sie hier: https://www.diw.de/documents/dokumentenarchiv/17/diw_01.c.369781.de/soepfrabo_personen_2010.pdf&quot;</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a><span class="sc">$</span>label_en</span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Data from individual questionnaires 2010&quot;</span></span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a><span class="sc">$</span>label_de</span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Daten vom Personenfragebogen 2010&quot;</span></span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a></span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a><span class="sc">$</span>url</span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;https://paneldata.org/soep-core/data/bap&quot;</span></span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a><span class="sc">$</span>languages</span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;en&quot;</span> <span class="st">&quot;de&quot;</span></span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a></span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a><span class="sc">$</span>lang</span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;en&quot;</span></span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a></span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a><span class="sc">$</span>label</span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Data from individual questionnaires 2010&quot;</span></span>
<span id="cb21-34"><a href="#cb21-34" tabindex="-1"></a></span>
<span id="cb21-35"><a href="#cb21-35" tabindex="-1"></a><span class="sc">$</span>class</span>
<span id="cb21-36"><a href="#cb21-36" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;data.frame&quot;</span> <span class="st">&quot;opendf&quot;</span>    </span></code></pre></div>
<p>If you provide a specific variable to the function, only the
corresponding metadata for that variable will be printed.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>bap87)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="sc">$</span>name</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;bap87&quot;</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="sc">$</span>label_en</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Current Health&quot;</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="sc">$</span>label_de</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Gesundheitszustand gegenwärtig&quot;</span></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a></span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a><span class="sc">$</span>description_en</span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Question: How would you describe your current health?&quot;</span></span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a><span class="sc">$</span>description_de</span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Frage: Wie würden Sie Ihren gegenwärtigen Gesundheitszustand beschreiben?&quot;</span></span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a></span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a><span class="sc">$</span>type</span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;numeric&quot;</span></span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" tabindex="-1"></a><span class="sc">$</span>url</span>
<span id="cb22-21"><a href="#cb22-21" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;https://paneldata.org/soep-core/data/bap/bap87&quot;</span></span>
<span id="cb22-22"><a href="#cb22-22" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" tabindex="-1"></a><span class="sc">$</span>labels_en</span>
<span id="cb22-24"><a href="#cb22-24" tabindex="-1"></a>Does not apply      No Answer      Very good           Good   Satisfactory </span>
<span id="cb22-25"><a href="#cb22-25" tabindex="-1"></a>            <span class="sc">-</span><span class="dv">2</span>             <span class="sc">-</span><span class="dv">1</span>              <span class="dv">1</span>              <span class="dv">2</span>              <span class="dv">3</span> </span>
<span id="cb22-26"><a href="#cb22-26" tabindex="-1"></a>          Poor            Bad </span>
<span id="cb22-27"><a href="#cb22-27" tabindex="-1"></a>             <span class="dv">4</span>              <span class="dv">5</span> </span>
<span id="cb22-28"><a href="#cb22-28" tabindex="-1"></a></span>
<span id="cb22-29"><a href="#cb22-29" tabindex="-1"></a><span class="sc">$</span>labels_de</span>
<span id="cb22-30"><a href="#cb22-30" tabindex="-1"></a>  trifft nicht zu      keine Angabe          Sehr gut               Gut </span>
<span id="cb22-31"><a href="#cb22-31" tabindex="-1"></a>               <span class="sc">-</span><span class="dv">2</span>                <span class="sc">-</span><span class="dv">1</span>                 <span class="dv">1</span>                 <span class="dv">2</span> </span>
<span id="cb22-32"><a href="#cb22-32" tabindex="-1"></a>Zufriedenstellend       Weniger gut          Schlecht </span>
<span id="cb22-33"><a href="#cb22-33" tabindex="-1"></a>                <span class="dv">3</span>                 <span class="dv">4</span>                 <span class="dv">5</span> </span>
<span id="cb22-34"><a href="#cb22-34" tabindex="-1"></a></span>
<span id="cb22-35"><a href="#cb22-35" tabindex="-1"></a><span class="sc">$</span>languages</span>
<span id="cb22-36"><a href="#cb22-36" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;en&quot;</span> <span class="st">&quot;de&quot;</span></span>
<span id="cb22-37"><a href="#cb22-37" tabindex="-1"></a></span>
<span id="cb22-38"><a href="#cb22-38" tabindex="-1"></a><span class="sc">$</span>lang</span>
<span id="cb22-39"><a href="#cb22-39" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;en&quot;</span></span>
<span id="cb22-40"><a href="#cb22-40" tabindex="-1"></a></span>
<span id="cb22-41"><a href="#cb22-41" tabindex="-1"></a><span class="sc">$</span>label</span>
<span id="cb22-42"><a href="#cb22-42" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Current Health&quot;</span></span></code></pre></div>
<p>If you’re interested in a particular attribute, you can access it
using the dollar sign followed by the attribute name. For instance,
let’s consider accessing a variable label in German (language code: de)
as an example.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>label_de</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Gesundheitszustand gegenwärtig&quot;</span></span></code></pre></div>
<p>Alternatively, you can use the <code>attr()</code> function to get
the same result:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">attr</span>(df<span class="sc">$</span>bap87, <span class="st">&quot;label_de&quot;</span>)</span></code></pre></div>
<p>Moreover, you have the flexibility to copy, remove, and modify these
attributes to suit your needs.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>description_de<span class="ot">&lt;-</span><span class="cn">NULL</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>description_de</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="cn">NULL</span></span></code></pre></div>
</div>
<div id="retrieve-metadata-with-getmetadata_opendf" class="section level3">
<h3>Retrieve Metadata with <code>getmetadata_opendf()</code></h3>
<p>You can also use the <code>getmetadata_opendf()</code> function to
retrieve labels and other metadata for the variables. By default, the
function will return the variable labels for a dataset:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df, <span class="at">type=</span><span class="st">&quot;labels&quot;</span>)</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>                              bap87                             bap9201 </span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>                   <span class="st">&quot;Current Health&quot;</span>    <span class="st">&quot;hours of sleep, normal workday&quot;</span> </span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>                            bap9001                             bap9002 </span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>    <span class="st">&quot;Pressed For Time Last 4 Weeks&quot;</span> <span class="st">&quot;Run-down, Melancholy Last 4 Weeks&quot;</span> </span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>                            bap9003                               bap96 </span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>       <span class="st">&quot;Well-balanced Last 4 Weeks&quot;</span>                            <span class="st">&quot;Height&quot;</span> </span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a>                               name </span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a>                        <span class="st">&quot;Firstname&quot;</span> </span></code></pre></div>
<p>or for a specific variable::</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df<span class="sc">$</span>bap96, <span class="at">type=</span><span class="st">&quot;labels&quot;</span>)</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>   bap96 </span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="st">&quot;Height&quot;</span> </span></code></pre></div>
<p>To retrieve metadata in a specific language, use the language
parameter:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df, <span class="at">type=</span><span class="st">&quot;labels&quot;</span>, <span class="at">language=</span><span class="st">&quot;en&quot;</span>)</span></code></pre></div>
<p>Or set the active language of the dataset using the
<code>setLanguage_opendf()</code> function:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">setLanguage_opendf</span>(df, <span class="at">language=</span><span class="st">&quot;en&quot;</span>)</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df, <span class="at">type=</span><span class="st">&quot;labels&quot;</span>)</span></code></pre></div>
<p>You can also use the <code>getmetadata_opendf()</code> function to
retrieve value labels for a specific variable by setting the argument
<code>type=&quot;valuelabels&quot;</code>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df<span class="sc">$</span>bap9001, <span class="at">type=</span><span class="st">&quot;valuelabels&quot;</span>)</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>Does not apply      No Answer         Always          Often      Sometimes </span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>            <span class="sc">-</span><span class="dv">2</span>             <span class="sc">-</span><span class="dv">1</span>              <span class="dv">1</span>              <span class="dv">2</span>              <span class="dv">3</span> </span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>  Almost Never          Never </span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>             <span class="dv">4</span>              <span class="dv">5</span> </span></code></pre></div>
<p>The value labels for each value are stored in the namespace:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">getmetadata_opendf</span>(df<span class="sc">$</span>bap9001, <span class="at">type=</span><span class="st">&quot;valuelabels&quot;</span>))</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Does not apply&quot;</span> <span class="st">&quot;No Answer&quot;</span>      <span class="st">&quot;Always&quot;</span>         <span class="st">&quot;Often&quot;</span>         </span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>[<span class="dv">5</span>] <span class="st">&quot;Sometimes&quot;</span>      <span class="st">&quot;Almost Never&quot;</span>   <span class="st">&quot;Never&quot;</span>         </span></code></pre></div>
<p>You can use the <code>getmetadata_opendf()</code> function to return
descriptions, urls, variable types and metadata languages as well:</p>
<p>To retrieve variable description(s), set the argument
<code>type=&quot;description&quot;</code>:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df, <span class="at">type=</span><span class="st">&quot;description&quot;</span>)</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>                                                   bap87 </span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a> <span class="st">&quot;Question: How would you describe your current health?&quot;</span> </span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a>                                                 bap9201 </span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a>                               <span class="st">&quot;Sleep hours per weekday&quot;</span> </span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>                                                 bap9001 </span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a><span class="st">&quot;Frequency of feeling time pressure in the past 4 weeks&quot;</span> </span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a>                                                 bap9002 </span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a>        <span class="st">&quot;Frequency of feeling a sad and depressed state&quot;</span> </span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a>                                                 bap9003 </span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a>                          <span class="st">&quot;Frequency of feeling balance&quot;</span> </span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a>                                                   bap96 </span>
<span id="cb32-13"><a href="#cb32-13" tabindex="-1"></a>                                             <span class="st">&quot;Body size&quot;</span> </span>
<span id="cb32-14"><a href="#cb32-14" tabindex="-1"></a>                                                    name </span>
<span id="cb32-15"><a href="#cb32-15" tabindex="-1"></a>                                             <span class="st">&quot;Firstname&quot;</span> </span></code></pre></div>
<p>To retrieve variable url(s), set the argument
<code>type=&quot;url&quot;</code>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df, <span class="at">type=</span><span class="st">&quot;url&quot;</span>)</span></code></pre></div>
<p>To retrieve variable type(s), set the argument
<code>type=&quot;type&quot;</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">getmetadata_opendf</span>(df, <span class="at">type=</span><span class="st">&quot;type&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="export-to-the-open-data-format-write_opendf" class="section level2">
<h2>Export to the Open Data Format: <code>write_opendf()</code></h2>
<p>To save a dataset as opendf-file, we can use the
<code>write_opendf()</code> function. Let’s assume we want to save the
first four columns of our dataset as a new opendf-file. We use the
<code>write_opendf()</code> function and indicate the r-dataframe and
the file name (and location if it).</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">write_opendf</span>(</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>  <span class="at">x =</span> df[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>], </span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;../df_1_4.zip&quot;</span></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>)</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a><span class="co">#or :</span></span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>df_14<span class="ot">&lt;-</span>df[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a><span class="fu">write_opendf</span>(</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a>  <span class="at">x =</span> df[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>], </span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;df_1_4.zip&quot;</span></span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a>)</span></code></pre></div>
<p>The XML file metadata.xml and the CSV file data.csv are saved within
the directory ‘data_rec’, as well as within the ZIP file ’data_rec.zip.
The dataset looks the same as before, just with fewer variables:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">&#39;1.0&#39;</span><span class="ot"> encoding=</span><span class="st">&#39;utf-8&#39;</span><span class="fu">?&gt;</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>&lt;<span class="kw">codeBook</span><span class="ot"> xmlns:xsi=</span><span class="st">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span class="ot"> xsi:schemaLocation=</span><span class="st">&quot;ddi:codebook:2_5 http://www.ddialliance.org/Specification/DDI-Codebook/2.5/XMLSchema/codebook.xsd&quot;</span><span class="ot"> xmlns=</span><span class="st">&quot;ddi:codebook:2_5&quot;</span><span class="ot"> version=</span><span class="st">&quot;2.5&quot;</span>&gt;</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a>    &lt;<span class="kw">fileDscr</span>&gt;</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>        &lt;<span class="kw">fileTxt</span>&gt;</span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>            &lt;<span class="kw">fileName</span>&gt;bap&lt;/<span class="kw">fileName</span>&gt;</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a>            &lt;<span class="kw">fileCont</span><span class="ot"> xml:lang=</span><span class="st">&quot;en&quot;</span>&gt;The data were collected as part of the SOEP-Core study using the questionnaire &quot;Living in Germany - Survey 2010 on the social situation - Personal questionnaire for all. This questionnaire is addressed to the individual persons in the household. A view of the survey instrument can be found here: https://www.diw.de/documents/dokumentenarchiv/17/diw_01.c.369781.de/soepfrabo_personen_2010.pdf&lt;/<span class="kw">fileCont</span>&gt;</span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a>            &lt;<span class="kw">fileCont</span><span class="ot"> xml:lang=</span><span class="st">&quot;de&quot;</span>&gt;Die Daten wurden im Rahmen der Studie SOEP-Core mittels des Fragebogens „Leben in Deutschland – Befragung 2010 zur sozialen Lage - Personenfragebogen für alle“ erhoben. Dieser Fragebogen richtet sich an die einzelnen Personen im Haushalt. Eine Ansicht des Erhebungsinstrumentes finden Sie hier: https://www.diw.de/documents/dokumentenarchiv/17/diw_01.c.369781.de/soepfrabo_personen_2010.pdf&lt;/<span class="kw">fileCont</span>&gt;</span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a>            &lt;<span class="kw">fileCitation</span>&gt;</span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a>                &lt;<span class="kw">titlStmt</span>&gt;</span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a>                    &lt;<span class="kw">titl</span><span class="ot"> xml:lang=</span><span class="st">&quot;en&quot;</span>&gt;Data from individual questionnaires 2010&lt;/<span class="kw">titl</span>&gt;</span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a>                    &lt;<span class="kw">titl</span><span class="ot"> xml:lang=</span><span class="st">&quot;de&quot;</span>&gt;Daten vom Personenfragebogen 2010&lt;/<span class="kw">titl</span>&gt;</span>
<span id="cb36-12"><a href="#cb36-12" tabindex="-1"></a>                &lt;/<span class="kw">titlStmt</span>&gt;</span>
<span id="cb36-13"><a href="#cb36-13" tabindex="-1"></a>            &lt;/<span class="kw">fileCitation</span>&gt;</span>
<span id="cb36-14"><a href="#cb36-14" tabindex="-1"></a>        &lt;/<span class="kw">fileTxt</span>&gt;</span>
<span id="cb36-15"><a href="#cb36-15" tabindex="-1"></a>        &lt;<span class="kw">notes</span>&gt;</span>
<span id="cb36-16"><a href="#cb36-16" tabindex="-1"></a>            &lt;<span class="kw">ExtLink</span><span class="ot"> URI=</span><span class="st">&quot;https://paneldata.org/soep-core/data/bap&quot;</span> /&gt;</span>
<span id="cb36-17"><a href="#cb36-17" tabindex="-1"></a>        &lt;/<span class="kw">notes</span>&gt;</span>
<span id="cb36-18"><a href="#cb36-18" tabindex="-1"></a>    &lt;/<span class="kw">fileDscr</span>&gt;</span>
<span id="cb36-19"><a href="#cb36-19" tabindex="-1"></a>    &lt;<span class="kw">dataDscr</span>&gt;</span>
<span id="cb36-20"><a href="#cb36-20" tabindex="-1"></a>        &lt;<span class="kw">var</span><span class="ot"> name=</span><span class="st">&quot;bap87&quot;</span>&gt;</span>
<span id="cb36-21"><a href="#cb36-21" tabindex="-1"></a>            &lt;<span class="kw">labl</span><span class="ot"> xml:lang=</span><span class="st">&quot;en&quot;</span>&gt;Current Health&lt;/<span class="kw">labl</span>&gt;</span>
<span id="cb36-22"><a href="#cb36-22" tabindex="-1"></a>            &lt;<span class="kw">labl</span><span class="ot"> xml:lang=</span><span class="st">&quot;de&quot;</span>&gt;Gesundheitszustand gegenwärtig&lt;/<span class="kw">labl</span>&gt;</span>
<span id="cb36-23"><a href="#cb36-23" tabindex="-1"></a>            &lt;<span class="kw">txt</span><span class="ot"> xml:lang=</span><span class="st">&quot;en&quot;</span>&gt;Question: How would you describe your current health?&lt;/<span class="kw">txt</span>&gt;</span>
<span id="cb36-24"><a href="#cb36-24" tabindex="-1"></a>            &lt;<span class="kw">txt</span><span class="ot"> xml:lang=</span><span class="st">&quot;de&quot;</span>&gt;Frage: Wie würden Sie Ihren gegenwärtigen Gesundheitszustand beschreiben?&lt;/<span class="kw">txt</span>&gt;</span>
<span id="cb36-25"><a href="#cb36-25" tabindex="-1"></a>            &lt;<span class="kw">notes</span>&gt;</span>
<span id="cb36-26"><a href="#cb36-26" tabindex="-1"></a>                &lt;<span class="kw">ExtLink</span><span class="ot"> URI=</span><span class="st">&quot;https://paneldata.org/soep-core/data/bap/bap87&quot;</span> /&gt;</span>
<span id="cb36-27"><a href="#cb36-27" tabindex="-1"></a>            &lt;/<span class="kw">notes</span>&gt;</span>
<span id="cb36-28"><a href="#cb36-28" tabindex="-1"></a>            &lt;<span class="kw">varFormat</span><span class="ot"> type=</span><span class="st">&quot;numeric&quot;</span> /&gt;</span>
<span id="cb36-29"><a href="#cb36-29" tabindex="-1"></a>            &lt;<span class="kw">catgry</span>&gt;</span>
<span id="cb36-30"><a href="#cb36-30" tabindex="-1"></a>                &lt;<span class="kw">catValu</span>&gt;-2&lt;/<span class="kw">catValu</span>&gt;</span>
<span id="cb36-31"><a href="#cb36-31" tabindex="-1"></a>                &lt;<span class="kw">labl</span><span class="ot"> xml:lang=</span><span class="st">&quot;en&quot;</span>&gt;Does not apply&lt;/<span class="kw">labl</span>&gt;</span>
<span id="cb36-32"><a href="#cb36-32" tabindex="-1"></a>                &lt;<span class="kw">labl</span><span class="ot"> xml:lang=</span><span class="st">&quot;de&quot;</span>&gt;trifft nicht zu&lt;/<span class="kw">labl</span>&gt;</span>
<span id="cb36-33"><a href="#cb36-33" tabindex="-1"></a>            &lt;/<span class="kw">catgry</span>&gt;</span>
<span id="cb36-34"><a href="#cb36-34" tabindex="-1"></a>            &lt;<span class="kw">catgry</span>&gt;</span>
<span id="cb36-35"><a href="#cb36-35" tabindex="-1"></a>                &lt;<span class="kw">catValu</span>&gt;-1&lt;/<span class="kw">catValu</span>&gt;</span>
<span id="cb36-36"><a href="#cb36-36" tabindex="-1"></a>                &lt;<span class="kw">labl</span><span class="ot"> xml:lang=</span><span class="st">&quot;en&quot;</span>&gt;No Answer&lt;/<span class="kw">labl</span>&gt;</span>
<span id="cb36-37"><a href="#cb36-37" tabindex="-1"></a>                &lt;<span class="kw">labl</span><span class="ot"> xml:lang=</span><span class="st">&quot;de&quot;</span>&gt;keine Angabe&lt;/<span class="kw">labl</span>&gt;</span>
<span id="cb36-38"><a href="#cb36-38" tabindex="-1"></a>            &lt;/<span class="kw">catgry</span>&gt;</span>
<span id="cb36-39"><a href="#cb36-39" tabindex="-1"></a>            &lt;<span class="kw">catgry</span>&gt;</span>
<span id="cb36-40"><a href="#cb36-40" tabindex="-1"></a>                &lt;<span class="kw">catValu</span>&gt;1&lt;/<span class="kw">catValu</span>&gt;</span>
<span id="cb36-41"><a href="#cb36-41" tabindex="-1"></a>                &lt;<span class="kw">labl</span><span class="ot"> xml:lang=</span><span class="st">&quot;en&quot;</span>&gt;Very good&lt;/<span class="kw">labl</span>&gt;</span>
<span id="cb36-42"><a href="#cb36-42" tabindex="-1"></a>                &lt;<span class="kw">labl</span><span class="ot"> xml:lang=</span><span class="st">&quot;de&quot;</span>&gt;Sehr gut&lt;/<span class="kw">labl</span>&gt;</span>
<span id="cb36-43"><a href="#cb36-43" tabindex="-1"></a>...</span></code></pre></div>
<p>The data.csv file now includes just four columns:</p>
<pre class="csv"><code>&quot;bap87&quot;,&quot;bap9201&quot;,&quot;bap9001&quot;,&quot;bap9002&quot;
4,-2,1,-1
3,5,-2,1
,-1,-1,2
1,9,-2,2
-1,4,2,3
3,4,-1,4
1,9,2,-1
...
</code></pre>
<p>If you wish to export only the metadata for documentation or
archiving purposes, you can achieve this by setting the argument
<code>export_data=&quot;no&quot;</code>. By doing so, the resulting directory or
zip file will solely contain the metadata XML file, excluding the data
CSV file. This allows you to specifically capture and preserve the
metadata without including the actual data, providing a solution for
documentation or archiving needs.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">write_opendf</span>(</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>  <span class="at">x=</span>df, </span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;../df_metadata.zip&quot;</span>,</span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>  <span class="at">export_data =</span> <span class="cn">FALSE</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a>)</span></code></pre></div>
<p>If you wish to export the dataset with the metadata only in one or
some languages, set the languages argument to
<code>languages=c(&quot;en&quot;)</code>. Default:
<code>languages=&quot;all&quot;</code></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="fu">write_opendf</span>(</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>  <span class="at">x=</span>df, </span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;../df_en.zip&quot;</span>,</span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>  <span class="at">languages =</span> <span class="st">&quot;en&quot;</span></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>)</span></code></pre></div>
<p>By default, languages is set to <code>languages=&quot;all&quot;</code>. You can
also define a list of languages to be exported:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="fu">write_opendf</span>(</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>  <span class="at">x=</span>df, </span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;../df_en_de.zip&quot;</span>,</span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>  <span class="at">languages =</span> <span class="fu">c</span>(<span class="st">&quot;en&quot;</span>,<span class="st">&quot;de&quot;</span>)</span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="lets-analyse-and-make-use-of-the-metadata" class="section level1">
<h1>Let’s Analyse and Make Use of the Metadata</h1>
<p>Now let’s see how we can use the metadata to better understand the
data and make more informative plots.</p>
<div id="frequency-table" class="section level3">
<h3>Frequency Table</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>bap87, <span class="at">useNA =</span> <span class="st">&quot;ifany&quot;</span>)</span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a>  <span class="sc">-</span><span class="dv">2</span>   <span class="sc">-</span><span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span> <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a>   <span class="dv">3</span>    <span class="dv">2</span>    <span class="dv">2</span>    <span class="dv">2</span>    <span class="dv">5</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">1</span> </span></code></pre></div>
<p>As expected, the frequency table displays the occurrence count of
each variable value. Now, let’s enhance the convenience of the frequency
table by utilizing the value labels associated with the variables. To
access the value labels, as explained in the preceding section, you can
utilize the base R function <code>attributes()</code>. Let’s proceed to
examine them now:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>labels_en</span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a>Does not apply      No Answer      Very good           Good   Satisfactory </span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a>            <span class="sc">-</span><span class="dv">2</span>             <span class="sc">-</span><span class="dv">1</span>              <span class="dv">1</span>              <span class="dv">2</span>              <span class="dv">3</span> </span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a>          Poor            Bad </span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a>             <span class="dv">4</span>              <span class="dv">5</span> </span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>labels_de</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a>  trifft nicht zu      keine Angabe          Sehr gut               Gut </span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a>               <span class="sc">-</span><span class="dv">2</span>                <span class="sc">-</span><span class="dv">1</span>                 <span class="dv">1</span>                 <span class="dv">2</span> </span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a>Zufriedenstellend       Weniger gut          Schlecht </span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a>                <span class="dv">3</span>                 <span class="dv">4</span>                 <span class="dv">5</span> </span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>  <span class="fu">factor</span>(</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a>    df<span class="sc">$</span>bap87, <span class="at">labels =</span> <span class="fu">names</span>(<span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>labels_en</span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a>                             )</span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a>    )</span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a>  )</span>
<span id="cb44-7"><a href="#cb44-7" tabindex="-1"></a></span>
<span id="cb44-8"><a href="#cb44-8" tabindex="-1"></a>Does not apply      No Answer      Very good           Good   Satisfactory </span>
<span id="cb44-9"><a href="#cb44-9" tabindex="-1"></a>             <span class="dv">3</span>              <span class="dv">2</span>              <span class="dv">2</span>              <span class="dv">2</span>              <span class="dv">5</span> </span>
<span id="cb44-10"><a href="#cb44-10" tabindex="-1"></a>          Poor            Bad </span>
<span id="cb44-11"><a href="#cb44-11" tabindex="-1"></a>             <span class="dv">2</span>              <span class="dv">3</span> </span></code></pre></div>
<p>Alternatively you can use the getmetadata_opendf()-function to get
the value labels:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb45-2"><a href="#cb45-2" tabindex="-1"></a>  <span class="fu">factor</span>(</span>
<span id="cb45-3"><a href="#cb45-3" tabindex="-1"></a>    df<span class="sc">$</span>bap87, <span class="at">labels =</span> <span class="fu">names</span>(<span class="fu">getmetadata_opendf</span>(df<span class="sc">$</span>bap87, <span class="at">valuelabels=</span>T))</span>
<span id="cb45-4"><a href="#cb45-4" tabindex="-1"></a>    )</span>
<span id="cb45-5"><a href="#cb45-5" tabindex="-1"></a>  )</span></code></pre></div>
<p>To display the data in a language other than the default one, let’s
try German by appending the respective language code to the attribute
name. For example, you can use $labels_de to access the German language
labels and present the information accordingly.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>  <span class="fu">factor</span>(</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a>    df<span class="sc">$</span>bap87,</span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>      <span class="at">labels=</span><span class="fu">names</span>(<span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>labels_de)</span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a>    )</span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a>  )</span>
<span id="cb46-7"><a href="#cb46-7" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" tabindex="-1"></a>  trifft nicht zu      keine Angabe          Sehr gut               Gut </span>
<span id="cb46-9"><a href="#cb46-9" tabindex="-1"></a>                <span class="dv">3</span>                 <span class="dv">2</span>                 <span class="dv">2</span>                 <span class="dv">2</span> </span>
<span id="cb46-10"><a href="#cb46-10" tabindex="-1"></a>Zufriedenstellend       Weniger gut          Schlecht </span>
<span id="cb46-11"><a href="#cb46-11" tabindex="-1"></a>                <span class="dv">5</span>                 <span class="dv">2</span>                 <span class="dv">3</span> </span></code></pre></div>
<p>Or using getmetadata_opendf()-function:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a>  <span class="fu">factor</span>(</span>
<span id="cb47-3"><a href="#cb47-3" tabindex="-1"></a>    df<span class="sc">$</span>bap87,</span>
<span id="cb47-4"><a href="#cb47-4" tabindex="-1"></a>      <span class="at">labels=</span><span class="fu">names</span>(<span class="fu">getmetadata_opendf</span>(df<span class="sc">$</span>bap87, <span class="at">type=</span><span class="st">&quot;valuelabels&quot;</span>, <span class="at">language=</span><span class="st">&quot;de&quot;</span>))</span>
<span id="cb47-5"><a href="#cb47-5" tabindex="-1"></a>    )</span>
<span id="cb47-6"><a href="#cb47-6" tabindex="-1"></a>  )</span>
<span id="cb47-7"><a href="#cb47-7" tabindex="-1"></a></span>
<span id="cb47-8"><a href="#cb47-8" tabindex="-1"></a>  trifft nicht zu      keine Angabe          Sehr gut               Gut </span>
<span id="cb47-9"><a href="#cb47-9" tabindex="-1"></a>                <span class="dv">3</span>                 <span class="dv">2</span>                 <span class="dv">2</span>                 <span class="dv">2</span> </span>
<span id="cb47-10"><a href="#cb47-10" tabindex="-1"></a>Zufriedenstellend       Weniger gut          Schlecht </span>
<span id="cb47-11"><a href="#cb47-11" tabindex="-1"></a>                <span class="dv">5</span>                 <span class="dv">2</span>                 <span class="dv">3</span> </span></code></pre></div>
</div>
<div id="merge-odf-datasets" class="section level2">
<h2>Merge ODF-Datasets:</h2>
<p>To merge ODF-datasets you should use the left_join(), right_join(),
full_join(), and inner_join() from the dplyr-package instead of the the
merge()-function to keep the attributes with the metadata of the merged
datasets.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a><span class="co">#similar to merge(df[,c(1:3,6)], df[,c(4:6)], by=&quot;name&quot;, all.x=T, all.y=F)</span></span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a>merged_df<span class="ot">&lt;-</span><span class="fu">left_join</span>(df[,<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">6</span>)], df[,<span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)], <span class="at">by=</span><span class="st">&quot;name&quot;</span>) </span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a><span class="co">#or </span></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a>merged_df<span class="ot">&lt;-</span><span class="fu">left_join</span>(df[,<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">6</span>)], df[,<span class="fu">c</span>(<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>)])</span></code></pre></div>
<div id="recoding-a-variable" class="section level3">
<h3>Recoding a Variable</h3>
<p>We want to display the table with only valid answers. Therefore, we
set the values <code>-2</code> and <code>-1</code> to <code>NA</code>.
Because we do not want to overwrite the original variable, we generate a
new one:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a>bap87_rec <span class="ot">&lt;-</span> df<span class="sc">$</span>bap87</span></code></pre></div>
<p>We check the attributes of the metadata and notice they are also
copied from the original variable to the new one:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a><span class="fu">attributes</span>(bap87_rec)</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="sc">$</span>name</span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;bap87&quot;</span></span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a><span class="sc">$</span>label_en</span>
<span id="cb50-6"><a href="#cb50-6" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Current Health&quot;</span></span>
<span id="cb50-7"><a href="#cb50-7" tabindex="-1"></a></span>
<span id="cb50-8"><a href="#cb50-8" tabindex="-1"></a><span class="sc">$</span>label_de</span>
<span id="cb50-9"><a href="#cb50-9" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Gesundheitszustand gegenwärtig&quot;</span></span>
<span id="cb50-10"><a href="#cb50-10" tabindex="-1"></a></span>
<span id="cb50-11"><a href="#cb50-11" tabindex="-1"></a><span class="sc">$</span>description_en</span>
<span id="cb50-12"><a href="#cb50-12" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Question: How would you describe your current health?&quot;</span></span>
<span id="cb50-13"><a href="#cb50-13" tabindex="-1"></a></span>
<span id="cb50-14"><a href="#cb50-14" tabindex="-1"></a><span class="sc">$</span>type</span>
<span id="cb50-15"><a href="#cb50-15" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;numeric&quot;</span></span>
<span id="cb50-16"><a href="#cb50-16" tabindex="-1"></a></span>
<span id="cb50-17"><a href="#cb50-17" tabindex="-1"></a><span class="sc">$</span>url</span>
<span id="cb50-18"><a href="#cb50-18" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;https://paneldata.org/soep-core/data/bap/bap87&quot;</span></span>
<span id="cb50-19"><a href="#cb50-19" tabindex="-1"></a></span>
<span id="cb50-20"><a href="#cb50-20" tabindex="-1"></a><span class="sc">$</span>labels_en</span>
<span id="cb50-21"><a href="#cb50-21" tabindex="-1"></a>Does not apply      No Answer      Very good           Good   Satisfactory </span>
<span id="cb50-22"><a href="#cb50-22" tabindex="-1"></a>            <span class="sc">-</span><span class="dv">2</span>             <span class="sc">-</span><span class="dv">1</span>              <span class="dv">1</span>              <span class="dv">2</span>              <span class="dv">3</span> </span>
<span id="cb50-23"><a href="#cb50-23" tabindex="-1"></a>          Poor            Bad </span>
<span id="cb50-24"><a href="#cb50-24" tabindex="-1"></a>             <span class="dv">4</span>              <span class="dv">5</span> </span>
<span id="cb50-25"><a href="#cb50-25" tabindex="-1"></a></span>
<span id="cb50-26"><a href="#cb50-26" tabindex="-1"></a><span class="sc">$</span>labels_de</span>
<span id="cb50-27"><a href="#cb50-27" tabindex="-1"></a>  trifft nicht zu      keine Angabe          Sehr gut               Gut </span>
<span id="cb50-28"><a href="#cb50-28" tabindex="-1"></a>               <span class="sc">-</span><span class="dv">2</span>                <span class="sc">-</span><span class="dv">1</span>                 <span class="dv">1</span>                 <span class="dv">2</span> </span>
<span id="cb50-29"><a href="#cb50-29" tabindex="-1"></a>Zufriedenstellend       Weniger gut          Schlecht </span>
<span id="cb50-30"><a href="#cb50-30" tabindex="-1"></a>                <span class="dv">3</span>                 <span class="dv">4</span>                 <span class="dv">5</span> </span>
<span id="cb50-31"><a href="#cb50-31" tabindex="-1"></a></span>
<span id="cb50-32"><a href="#cb50-32" tabindex="-1"></a><span class="sc">$</span>languages</span>
<span id="cb50-33"><a href="#cb50-33" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;en&quot;</span> <span class="st">&quot;de&quot;</span></span>
<span id="cb50-34"><a href="#cb50-34" tabindex="-1"></a></span>
<span id="cb50-35"><a href="#cb50-35" tabindex="-1"></a><span class="sc">$</span>lang</span>
<span id="cb50-36"><a href="#cb50-36" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;en&quot;</span></span>
<span id="cb50-37"><a href="#cb50-37" tabindex="-1"></a></span>
<span id="cb50-38"><a href="#cb50-38" tabindex="-1"></a><span class="sc">$</span>label</span>
<span id="cb50-39"><a href="#cb50-39" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Current Health&quot;</span></span></code></pre></div>
<p>Now we can set the negative values to NA:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="cf">for</span> (row <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(bap87_rec)) {</span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(bap87_rec[row]) <span class="sc">&amp;&amp;</span> bap87_rec[row] <span class="sc">&lt;=</span> <span class="sc">-</span><span class="dv">1</span>) {</span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a>    bap87_rec[row] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a>  }</span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a>}</span>
<span id="cb51-6"><a href="#cb51-6" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" tabindex="-1"></a><span class="fu">table</span>(bap87_rec, <span class="at">useNA =</span> <span class="st">&quot;ifany&quot;</span>)</span>
<span id="cb51-8"><a href="#cb51-8" tabindex="-1"></a>bap87_rec</span>
<span id="cb51-9"><a href="#cb51-9" tabindex="-1"></a>   <span class="dv">1</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">5</span> <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span> </span>
<span id="cb51-10"><a href="#cb51-10" tabindex="-1"></a>   <span class="dv">2</span>    <span class="dv">2</span>    <span class="dv">5</span>    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">6</span> </span></code></pre></div>
<p>We notice that the copied values and value labels do not fit
anymore:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a><span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>labels_en</span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a>Does not apply      No Answer      Very good           Good   Satisfactory </span>
<span id="cb52-3"><a href="#cb52-3" tabindex="-1"></a>            <span class="sc">-</span><span class="dv">2</span>             <span class="sc">-</span><span class="dv">1</span>              <span class="dv">1</span>              <span class="dv">2</span>              <span class="dv">3</span> </span>
<span id="cb52-4"><a href="#cb52-4" tabindex="-1"></a>          Poor            Bad </span>
<span id="cb52-5"><a href="#cb52-5" tabindex="-1"></a>             <span class="dv">4</span>              <span class="dv">5</span> </span></code></pre></div>
<p>To change that, we’ll copy positions <code>3</code> to
<code>7</code>, retaining the desired range of values and their
respective value labels.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a><span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>labels_en <span class="ot">&lt;-</span> <span class="fu">unname</span>(<span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>labels_en)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>] <span class="co"># values</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>labels_en) <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>labels_en)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>] <span class="co"># labels</span></span>
<span id="cb53-3"><a href="#cb53-3" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" tabindex="-1"></a><span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>labels_en</span>
<span id="cb53-5"><a href="#cb53-5" tabindex="-1"></a>   Very good         Good Satisfactory         Poor          Bad </span>
<span id="cb53-6"><a href="#cb53-6" tabindex="-1"></a>           <span class="dv">1</span>            <span class="dv">2</span>            <span class="dv">3</span>            <span class="dv">4</span>            <span class="dv">5</span> </span></code></pre></div>
<p>Do the same for the other language versions of the new recoded
variable:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>labels_de <span class="ot">&lt;-</span> <span class="fu">unname</span>(<span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>labels_de)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>] <span class="co"># values</span></span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>labels_de) <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">attributes</span>(df<span class="sc">$</span>bap87)<span class="sc">$</span>labels_de)[<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>] <span class="co"># labels</span></span></code></pre></div>
<p>We do also notice that the variable name is not adequate. We replace
the name copied from the original variable with the new name
<code>bap87_rec</code>.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>name <span class="ot">&lt;-</span> <span class="st">&quot;bap87_rec&quot;</span></span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a><span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>name</span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;bap87_rec&quot;</span></span></code></pre></div>
<p>Now we generate the frequency table by using the variable as a factor
variable.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="fu">table</span>(</span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a>  <span class="fu">factor</span>(</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a>    bap87_rec,</span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a>      <span class="at">labels=</span><span class="fu">names</span>(<span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>labels_en)</span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a>    )</span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a>  )</span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a></span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a>   Very good         Good Satisfactory         Poor          Bad </span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a>           <span class="dv">2</span>            <span class="dv">2</span>            <span class="dv">5</span>            <span class="dv">2</span>            <span class="dv">3</span> </span></code></pre></div>
</div>
<div id="barplot" class="section level3">
<h3>Barplot</h3>
<p>To create a barplot, we will utilize the recoded variable from the
previous section. This example will demonstrate how to leverage metadata
to create a more convenient and informative graph. By incorporating the
metadata into the visualization, we can enhance the graph’s
interpretability and provide a clearer understanding of the data.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a><span class="fu">barplot</span>(</span>
<span id="cb57-2"><a href="#cb57-2" tabindex="-1"></a>  <span class="fu">table</span>(</span>
<span id="cb57-3"><a href="#cb57-3" tabindex="-1"></a>  <span class="fu">factor</span>(</span>
<span id="cb57-4"><a href="#cb57-4" tabindex="-1"></a>    bap87_rec,</span>
<span id="cb57-5"><a href="#cb57-5" tabindex="-1"></a>      <span class="at">labels=</span><span class="fu">names</span>(<span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>labels_en)</span>
<span id="cb57-6"><a href="#cb57-6" tabindex="-1"></a>    )</span>
<span id="cb57-7"><a href="#cb57-7" tabindex="-1"></a>  ),</span>
<span id="cb57-8"><a href="#cb57-8" tabindex="-1"></a>  <span class="at">main =</span> <span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>description_en, <span class="co"># title</span></span>
<span id="cb57-9"><a href="#cb57-9" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="fu">paste0</span>(</span>
<span id="cb57-10"><a href="#cb57-10" tabindex="-1"></a>    <span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>name,<span class="st">&quot;: &quot;</span>, <span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>label), <span class="co"># label </span></span>
<span id="cb57-11"><a href="#cb57-11" tabindex="-1"></a>  <span class="at">sub =</span> <span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>url, <span class="co"># subtitle</span></span>
<span id="cb57-12"><a href="#cb57-12" tabindex="-1"></a>  <span class="at">cex.main =</span> <span class="fl">0.9</span>, <span class="at">cex.names =</span> <span class="fl">0.7</span>, <span class="at">cex.sub =</span> <span class="fl">0.8</span>, <span class="at">cex.axis =</span> <span class="fl">0.6</span>, <span class="at">cex.lab =</span> <span class="fl">0.7</span> <span class="co"># font sizes</span></span>
<span id="cb57-13"><a href="#cb57-13" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<p>Drawing a barplot with the German description becomes effortless when
dealing with dates that have multiple language versions of labels and
descriptions. Simply append the language code to the end of the label
attributes, and you’ll be able to generate the desired barplot with the
German description:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="fu">barplot</span>(</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a>  <span class="fu">table</span>(</span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a>  <span class="fu">factor</span>(</span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a>    bap87_rec,</span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a>      <span class="at">labels=</span><span class="fu">names</span>(<span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>labels_de)</span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a>    )</span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a>  ),</span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a>  <span class="at">main =</span> <span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>description_de, <span class="co"># title</span></span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="fu">paste0</span>(</span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a>    <span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>name,<span class="st">&quot;: &quot;</span>, <span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>label_de), <span class="co"># label </span></span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a>  <span class="at">sub =</span> <span class="fu">attributes</span>(bap87_rec)<span class="sc">$</span>url, <span class="co"># subtitle</span></span>
<span id="cb58-12"><a href="#cb58-12" tabindex="-1"></a>  <span class="at">cex.main =</span> <span class="fl">0.7</span>, <span class="at">cex.names =</span> <span class="fl">0.5</span>, <span class="at">cex.sub =</span> <span class="fl">0.8</span>, <span class="at">cex.axis =</span> <span class="fl">0.7</span>, <span class="at">cex.lab =</span> <span class="fl">0.7</span> <span class="co"># font sizes</span></span>
<span id="cb58-13"><a href="#cb58-13" tabindex="-1"></a>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" style="display: block; margin: auto;" /></p>
<!-- devtools::build_rmd("vignettes/opendataformat.Rmd") -->
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
